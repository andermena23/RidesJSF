<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<f:view locale="#{index.language}">
	<h:head>
		<title>RidesJSF</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 2em;
			}
			.header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 2em;
				padding-bottom: 1em;
				border-bottom: 2px solid #4CAF50;
			}
			.user-info {
				text-align: right;
			}
			.btn-logout {
				background-color: #f44336;
				color: white;
				border: none;
				padding: 0.5em 1em;
				border-radius: 4px;
				cursor: pointer;
				font-size: 0.9em;
			}
			.btn-logout:hover {
				background-color: #d32f2f;
			}
		</style>
	</h:head>
	<h:body>
		<f:loadBundle basename="Etiquetas" var="msg" />
		
		<!-- Redirect to login if not logged in -->
		<f:metadata>
			<f:event type="preRenderView" listener="#{index.checkAuthentication}" />
		</f:metadata>
		
		<h:form id="mainForm">
			<div class="header">
				<h2>#{msg['Index.Title']}</h2>
				<div class="user-info">
					<p>#{msg['Login.Welcome']}, <strong>#{login.currentUser.username}</strong></p>
					<p style="font-size: 0.9em; color: #666;">
						#{msg['Index.Role']}: #{login.currentUser.role.roleName}
						<h:panelGroup rendered="#{index.isTraveler()}">
							 | #{msg['Index.Balance']}: <strong>#{login.walletBalance} â‚¬</strong>
						</h:panelGroup>
					</p>
					<h:commandButton value="#{msg['Login.Logout']}" 
					                 action="#{login.logout}" 
					                 styleClass="btn-logout" />
				</div>
			</div>
			
			<h3>#{msg['Index.SelectOption']}</h3>
			<p>
					<h:commandButton value="GIDARI BATEN BIDAI GUZTIAK ERAKUTSI ETA ZENBATU" action="#{index.ridesByDriver}"
						style="font-size: 1em; padding: 0.5em 1em;" />
			</p>
			<h:panelGroup rendered="#{index.canCreateRide()}">
				<p>
					<h:commandButton value="#{msg['Index.CreateRide']}" action="#{index.createRide}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
				<p>
					<h:commandButton value="#{msg['Index.RemoveRide']}" action="RemoveRide"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
			</h:panelGroup>
			<h:panelGroup rendered="#{index.isDriver()}">
				<p>
					<h:commandButton value="#{msg['Index.MyRides']}" action="#{index.myRides}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
			</h:panelGroup>
			<h:panelGroup rendered="#{index.isAdmin()}">
				<p>
					<h:commandButton value="#{msg['Index.QueryUsers']}" action="#{index.queryUsers}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
				<p>
					<h:commandButton value="#{msg['Index.AdminQueryRides']}" action="#{index.adminQueryRides}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
			</h:panelGroup>
			<p>
				<h:commandButton value="#{msg['Index.QueryRides']}" action="#{index.queryRides}"
					style="font-size: 1em; padding: 0.5em 1em;" />
			</p>
			<h:panelGroup rendered="#{index.isTraveler()}">
				<p>
					<h:commandButton value="#{msg['Index.ReserveRides']}" action="#{index.reserveRides}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
				<p>
					<h:commandButton value="#{msg['Index.ManageWallet']}" action="#{index.manageWallet}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
				<p>
					<h:commandButton value="#{msg['Index.MyReservations']}" action="#{index.myReservations}"
						style="font-size: 1em; padding: 0.5em 1em;" />
				</p>
			</h:panelGroup>
			<p>
				<h:selectOneRadio value="#{index.language}">
					<f:selectItem itemValue="eu" itemLabel="Euskara" />
					<f:selectItem itemValue="es" itemLabel="Castellano" />
					<f:selectItem itemValue="en" itemLabel="English" />
					<f:ajax render="@form" />
				</h:selectOneRadio>
			</p>
		</h:form>
	</h:body>
</f:view>
</html>